---
title: "William Shakespeare' Work in a Word Cloud"
author: "Franz X. Mohr"
date: '2018-12-30'
tags:
  - wordcloud
  - text-mining
---



<p>Word or tag clouds seem to be quite popular at the moment. Although their analytical power might be limited, they do serve an aesthetic purpose and, for example, could be put on the cover page of a thesis or a presentation using the content of your work or the literature you went through.</p>
<p>Inspired by <a href="http://www.exegetic.biz/blog/2015/07/constructing-word-cloud-for-icml-2015/" target="_blank" rel="noopener">Andrew Collier’s blog post on creating word clouds from multiple PDF-sources</a> I played around with some texts from the Gutenberg project to visualize some of the most prominent pieces of classic literature. Then I remembered my old English teacher, who said that Shakespeare’s work basically hinged on the motives of “love”, “death” and “aristocracy”. So, I became curious about how this might be reflected in a word cloud that is drawn from the complete works of William Shakespeare. Fortunately, a complete version of the master’s work is available on the <a href="http://www.gutenberg.org/ebooks/100" target="_blank" rel="noopener">Project Gutenberg</a>, where you can also find a myriad of other free literature to download and read (legally!!!). But let’s postpone the reading and concentrate on how to make a word cloud from such data. I will go through this step-by-step as in Andrew Collier’ post.</p>
<p>Download the raw text file into R and read its lines.</p>
<pre class="r"><code>rawc &lt;- readLines(file(&quot;http://www.gutenberg.org/files/100/100-0.txt&quot;))</code></pre>
<p>Both at the beginning and the end of the file there is a lot of information on how to use the file and copyright issues. Since such modern text might bias our results, we omit those lines by looking only at the part between them using <code>rawc[142:151140]</code>. Then we put the relevant lines together into a single character string:</p>
<pre class="r"><code>text &lt;- paste(rawc[142:151140], collapse = &quot; &quot;)</code></pre>
<p>Convert all letters into lower cases. After that you will need the <code>tm</code> package for <strong>t</strong>ext <strong>m</strong>ining, which contains functions to remove numbers and punctuation.</p>
<pre class="r"><code>text &lt;- tolower(text) # Convert all letters into lower cases

library(tm) # install.packages(&quot;tm&quot;)
text &lt;- removeNumbers(text) # Remove all numbers
text &lt;- removePunctuation(text) # Remove punctuation</code></pre>
<p>The <code>tm</code> package also includes a function that allows to remove words from the sample, which are very frequently used, but add no content to the analysis. First, there is a prespecified list of words available that contains such words. It can be easily accessed by <code>stopwords(&quot;english&quot;)</code>.</p>
<p>When it is used in <code>removeWords</code>, a bunch of unnecessary words will be removed from the data. A little warning here: This takes some time…</p>
<pre class="r"><code>text &lt;- removeWords(text, stopwords(&quot;english&quot;))</code></pre>
<p>Secondly, I removed some additional words, which I collected by iteratively running the code of this post and did not want to have in the sample. Again, this takes some time.</p>
<pre class="r"><code>exclude &lt;- c(&quot;shall&quot;, &quot;thee&quot;, &quot;thy&quot;, &quot;thus&quot;, &quot;will&quot;, &quot;come&quot;,
             &quot;know&quot;, &quot;may&quot;, &quot;upon&quot;, &quot;hath&quot;, &quot;now&quot;, &quot;well&quot;, &quot;make&quot;,
             &quot;let&quot;, &quot;see&quot;, &quot;tell&quot;, &quot;yet&quot;, &quot;like&quot;, &quot;put&quot;, &quot;speak&quot;,
             &quot;give&quot;, &quot;speak&quot;, &quot;can&quot;, &quot;comes&quot;, &quot;makes&quot;, &quot;sees&quot;, &quot;tells&quot;,
             &quot;likes&quot;, &quot;puts&quot;, &quot;speaks&quot;, &quot;gives&quot;, &quot;speaks&quot;, &quot;knows&quot;,
             &quot;say&quot;, &quot;says&quot;, &quot;take&quot;, &quot;takes&quot;, &quot;exeunt&quot;, &quot;though&quot;, &quot;hear&quot;, 
             &quot;think&quot;, &quot;hears&quot;, &quot;thinks&quot;, &quot;listen&quot;, &quot;listens&quot;, &quot;hear&quot;, 
             &quot;hears&quot;, &quot;follow&quot; ,&quot;commercially&quot; ,&quot;commercial&quot; , &quot;readable&quot;,
             &quot;personal&quot;, &quot;doth&quot;, &quot;membership&quot;, &quot;stand&quot;, &quot;therefore&quot;, 
             &quot;complete&quot;, &quot;tis&quot;, &quot;electronic&quot;, &quot;prohibited&quot;, &quot;must&quot;,
             &quot;look&quot;, &quot;looks&quot;, &quot;call&quot;, &quot;calls&quot;, &quot;done&quot;, &quot;prove&quot;, &quot;whose&quot;,
             &quot;enter&quot;, &quot;one&quot;, &quot;words&quot;, &quot;thou&quot;, &quot;came&quot;, &quot;much&quot;, &quot;never&quot;,
             &quot;wit&quot;, &quot;leave&quot;, &quot;even&quot;, &quot;ever&quot;, &quot;distributed&quot; , &quot;keep&quot;,
             &quot;stay&quot;, &quot;made&quot;, &quot;scene&quot;, &quot;many&quot;, &quot;away&quot;, &quot;exit&quot;, &quot;shalt&quot;)

text &lt;- removeWords(text, exclude)</code></pre>
<p>Split the single character string into a list of words, get rid of the empty entries and keep all entries with more than two letters.</p>
<pre class="r"><code>text &lt;- strsplit(text, split = &quot; &quot;)[[1]]
text &lt;- text[text != &quot;&quot;]
text &lt;- text[nchar(text) &gt; 2]</code></pre>
<p>The next step requires the <code>dplyr</code> package. Create a table from a data frame of the word list and count the number of instances of a word in that table. It is useful to let the count function sort the result according to the number of instances.</p>
<pre class="r"><code>library(dplyr)

text_tbl &lt;- tbl_df(as.data.frame(text)) # Create table
text_tbl &lt;- count(text_tbl, sort = TRUE, vars = text) # Count and sort words</code></pre>
<p>Basically, you could already make a word cloud from this data. However, since the amount of words is quite high (27,642), I would like to limit the set of plotted words to 300, which I deem to be a good size for word clouds, because you are still impressed by the number of words in the cloud without losing the ability to get a basic impression of the content from it.</p>
<pre class="r"><code>text_tbl &lt;- text_tbl[1:300,] # Extract the first 300 most frequent words</code></pre>
<p>Finally, you can plot the word cloud using the function <code>tagcloud</code> from the <code>tagcloud</code> package, where you have to specify the words and their weights, i.e. counts. Additionally, I used <code>fvert = .3</code> so that 30 percent of the words in the could are aligned vertically.</p>
<pre class="r"><code>library(tagcloud)
tagcloud(text_tbl$vars, weights = text_tbl$n, fvert = .3)</code></pre>
<p><img src="/post/2018-12-30-shakespeare-wordcloud_files/figure-html/unnamed-chunk-9-1.png" width="576" /></p>
<p>Look at the result. As we can see, my English teacher was quite right, although I did not expect that high concentration of words with masculine aristocratic connotation. However, since we excluded words like “thy”, “shall”, “will”, “thou” etc., much content from the sonnets is lost, where a lot of motives like “love” and “desire” are not explicitly mentioned, but at least implicitly present. This might cause a bias towards motives from the dramatic pieces.</p>
